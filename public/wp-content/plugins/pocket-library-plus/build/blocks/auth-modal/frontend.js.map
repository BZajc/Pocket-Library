{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":"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","sources":["webpack://pocket-library-plus/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  const openAuthFormButton = document.querySelectorAll(\".auth-container\");\r\n  const modalElement = document.querySelector(\r\n    \".wp-block-pocket-library-plus-auth-modal\"\r\n  );\r\n  const modalCloseElements = document.querySelectorAll(\r\n    \".auth-form-overlay, .auth-close-button\"\r\n  );\r\n\r\n  openAuthFormButton.forEach((el) => {\r\n    el.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      modalElement.classList.add(\"auth-modal-opened\");\r\n    });\r\n  });\r\n\r\n  modalCloseElements.forEach((el) => {\r\n    el.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      modalElement.classList.remove(\"auth-modal-opened\");\r\n    });\r\n  });\r\n\r\n  const tabs = document.querySelectorAll(\".auth-tabs a\");\r\n  const loginForm = document.querySelector(\"#auth-login-form\");\r\n  const registerForm = document.querySelector(\"#auth-register-form\");\r\n\r\n  tabs.forEach((tab) => {\r\n    tab.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      tabs.forEach((authActiveTab) => {\r\n        authActiveTab.classList.remove(\"auth-active-tab\");\r\n      });\r\n\r\n      e.currentTarget.classList.add(\"auth-active-tab\");\r\n\r\n      const authActiveTab = e.currentTarget.getAttribute(\"href\");\r\n\r\n      if (authActiveTab === \"#auth-login-form\") {\r\n        loginForm.style.display = \"block\";\r\n        registerForm.style.display = \"none\";\r\n      } else {\r\n        loginForm.style.display = \"none\";\r\n        registerForm.style.display = \"block\";\r\n      }\r\n    });\r\n  });\r\n\r\n  registerForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const registerFieldset = registerForm.querySelector(\"fieldset\");\r\n    registerFieldset.setAttribute(\"disabled\", true);\r\n\r\n    const registerStatus = registerForm.querySelector(\".auth-register-status\");\r\n    registerStatus.innerHTML = `\r\n    <div class=\"auth-register-status\">\r\n      Creating account...\r\n    </div>\r\n  `;\r\n\r\n    const formData = {\r\n      username: registerForm.querySelector(\"#auth-register-name\").value,\r\n      email: registerForm.querySelector(\"#auth-register-email\").value,\r\n      password: registerForm.querySelector(\"#auth-register-password\").value,\r\n    };\r\n\r\n    const response = await fetch(plp_auth_rest.register, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(formData),\r\n    });\r\n\r\n    const responseJSON = await response.json();\r\n\r\n    if (responseJSON.status === 2) {\r\n      registerStatus.innerHTML = `\r\n        <div class=\"auth-register-status auth-status-success\">\r\n          Your account has been created.\r\n        </div>\r\n      `;\r\n\r\n      location.reload();\r\n    } else {\r\n      registerFieldset.removeAttribute(\"disabled\");\r\n      registerStatus.innerHTML = `\r\n        <div class=\"auth-register-status auth-status-error\">\r\n          Something went wrong.\r\n        </div>\r\n      `;\r\n    }\r\n  });\r\n\r\n  loginForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const loginFieldset = loginForm.querySelector(\"fieldset\");\r\n    loginFieldset.setAttribute(\"disabled\", true);\r\n\r\n    const loginStatus = loginForm.querySelector(\".auth-login-status\");\r\n    loginStatus.innerHTML = `\r\n    <div class=\"auth-login-status\">\r\n      Logging in. Please wait\r\n    </div>\r\n    `;\r\n\r\n    const formData = {\r\n      user_login: loginForm.querySelector(\"#auth-login-email\").value,\r\n      password: loginForm.querySelector(\"#auth-login-password\").value,\r\n    };\r\n\r\n    const response = await fetch(plp_auth_rest.login, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(formData),\r\n    });\r\n\r\n    const responseJSON = await response.json();\r\n\r\n    if (responseJSON.status === 2) {\r\n      loginStatus.innerHTML = `\r\n      <div class=\"auth-login-status auth-status-success\">\r\n        Successfully logged in\r\n      </div>\r\n      `;\r\n\r\n      location.reload();\r\n    } else {\r\n      loginFieldset.removeAttribute('disabled')\r\n      loginStatus.innerHTML = `\r\n        <div class=\"auth-login-status auth-status-error\">\r\n          Invalid credentials. Please try again.\r\n        </div>\r\n      `\r\n    }\r\n  });\r\n});\r\n"],"names":["document","addEventListener","openAuthFormButton","querySelectorAll","modalElement","querySelector","modalCloseElements","forEach","el","e","preventDefault","classList","add","remove","tabs","loginForm","registerForm","tab","authActiveTab","currentTarget","getAttribute","style","display","registerFieldset","setAttribute","registerStatus","innerHTML","formData","username","value","email","password","response","fetch","plp_auth_rest","register","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","loginFieldset","loginStatus","user_login","login"],"sourceRoot":""}
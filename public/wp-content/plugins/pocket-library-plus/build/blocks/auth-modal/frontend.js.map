{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":"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","sources":["webpack://pocket-library-plus/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  const openAuthFormButton = document.querySelectorAll(\".auth-container\");\r\n  const modalElement = document.querySelector(\r\n    \".wp-block-pocket-library-plus-auth-modal\"\r\n  );\r\n  const modalCloseElements = document.querySelectorAll(\r\n    \".auth-form-overlay, .auth-close-button\"\r\n  );\r\n\r\n  openAuthFormButton.forEach((el) => {\r\n    el.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      modalElement.classList.add(\"auth-modal-opened\");\r\n    });\r\n  });\r\n\r\n  modalCloseElements.forEach((el) => {\r\n    el.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      modalElement.classList.remove(\"auth-modal-opened\");\r\n    });\r\n  });\r\n\r\n  const tabs = document.querySelectorAll(\".auth-tabs a\");\r\n  const loginForm = document.querySelector(\"#auth-login-form\");\r\n  const registerForm = document.querySelector(\"#auth-register-form\");\r\n\r\n  tabs.forEach((tab) => {\r\n    tab.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n\r\n      tabs.forEach((authActiveTab) => {\r\n        authActiveTab.classList.remove(\"auth-active-tab\");\r\n      });\r\n\r\n      e.currentTarget.classList.add(\"auth-active-tab\");\r\n\r\n      const authActiveTab = e.currentTarget.getAttribute(\"href\");\r\n\r\n      if (authActiveTab === \"#auth-login-form\") {\r\n        loginForm.style.display = \"block\";\r\n        registerForm.style.display = \"none\";\r\n      } else {\r\n        loginForm.style.display = \"none\";\r\n        registerForm.style.display = \"block\";\r\n      }\r\n    });\r\n  });\r\n\r\n  if (registerForm || loginForm) {\r\n    registerForm.addEventListener(\"submit\", async (e) => {\r\n      e.preventDefault();\r\n\r\n      const registerFieldset = registerForm.querySelector(\"fieldset\");\r\n      registerFieldset.setAttribute(\"disabled\", true);\r\n\r\n      const registerStatus = registerForm.querySelector(\r\n        \".auth-register-status\"\r\n      );\r\n      registerStatus.innerHTML = `\r\n      <div class=\"auth-register-status\">\r\n        Creating account...\r\n      </div>\r\n      `;\r\n\r\n      const formData = {\r\n        username: registerForm.querySelector(\"#auth-register-name\").value,\r\n        email: registerForm.querySelector(\"#auth-register-email\").value,\r\n        password: registerForm.querySelector(\"#auth-register-password\").value,\r\n      };\r\n\r\n      const response = await fetch(plp_auth_rest.register, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const responseJSON = await response.json();\r\n\r\n      if (responseJSON.status === 2) {\r\n        registerStatus.innerHTML = `\r\n          <div class=\"auth-register-status auth-status-success\">\r\n            Your account has been created.\r\n          </div>\r\n        `;\r\n        location.reload();\r\n      } else {\r\n        registerFieldset.removeAttribute(\"disabled\");\r\n        registerStatus.innerHTML = `\r\n          <div class=\"auth-register-status auth-status-error\">\r\n            Something went wrong.\r\n          </div>\r\n        `;\r\n      }\r\n    });\r\n\r\n    loginForm.addEventListener(\"submit\", async (e) => {\r\n      e.preventDefault();\r\n\r\n      const loginFieldset = loginForm.querySelector(\"fieldset\");\r\n      loginFieldset.setAttribute(\"disabled\", true);\r\n\r\n      const loginStatus = loginForm.querySelector(\".auth-login-status\");\r\n      loginStatus.innerHTML = `\r\n    <div class=\"auth-login-status\">\r\n      Logging in. Please wait\r\n    </div>\r\n    `;\r\n\r\n      const formData = {\r\n        user_login: loginForm.querySelector(\"#auth-login-email\").value,\r\n        password: loginForm.querySelector(\"#auth-login-password\").value,\r\n      };\r\n\r\n      const response = await fetch(plp_auth_rest.login, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const responseJSON = await response.json();\r\n\r\n      if (responseJSON.status === 2) {\r\n        loginStatus.innerHTML = `\r\n      <div class=\"auth-login-status auth-status-success\">\r\n        Successfully logged in\r\n      </div>\r\n      `;\r\n\r\n        location.reload();\r\n      } else {\r\n        loginFieldset.removeAttribute(\"disabled\");\r\n        loginStatus.innerHTML = `\r\n        <div class=\"auth-login-status auth-status-error\">\r\n          Invalid credentials. Please try again.\r\n        </div>\r\n      `;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Toggle change form\r\n  const changeButton = document.querySelector(\".auth-change-button\");\r\n\r\n  changeButton.addEventListener(\"click\", () => {\r\n    const updateForm = document.querySelector(\".auth-update-form\");\r\n    const publicDataContainer = document.querySelector('.auth-public-data-container')\r\n\r\n    publicDataContainer.classList.toggle(\"auth-public-data-container-hide\")\r\n    updateForm.classList.toggle(\"auth-update-form-show\");\r\n\r\n    if(updateForm.classList.contains('auth-update-form-show')) {\r\n      changeButton.innerHTML = ` Hide Change Info ‚ùå`\r\n    } else {\r\n      changeButton.innerHTML = ` Change Info `\r\n    }\r\n  });\r\n});\r\n"],"names":["document","addEventListener","openAuthFormButton","querySelectorAll","modalElement","querySelector","modalCloseElements","forEach","el","e","preventDefault","classList","add","remove","tabs","loginForm","registerForm","tab","authActiveTab","currentTarget","getAttribute","style","display","registerFieldset","setAttribute","registerStatus","innerHTML","formData","username","value","email","password","response","fetch","plp_auth_rest","register","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","loginFieldset","loginStatus","user_login","login","changeButton","updateForm","publicDataContainer","toggle","contains"],"sourceRoot":""}